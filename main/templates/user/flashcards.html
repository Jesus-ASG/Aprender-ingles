{% extends 'main_template.html' %}
{% load static %}
{% load filters %}

{% block title %} Story Quest {% endblock %}

{% block page-styles %}
<link rel="stylesheet" href="{% static 'css/user/index_user.css' %}">
<style>
	.show {
		display: block;
	}

	.hide {
		display: none;
	}
</style>
{% endblock %}

{% block content %}
<div class="container main-content">

	<div class="row mt-3">
		<div class="col-12 page-title-container">
			<h1 class="fs-1">Flashcards</h1>
		</div>
	</div>

	<hr>
	<div class="row">
		<div class="col-12 text-end mb-3">
			<button class="btn btn-success mt-3" style="color:#fff;" href="#" type="button" title="Create a new collection"
				data-bs-toggle="modal" data-bs-target="#add_new_collection">
				+
			</button>
		</div>
		{% for fcc in flashcards_collections %}
		<div class="flashcard_collection_container">
			{{ fcc.collection_name }}
		</div>
		{% empty %}
		<div class="col-12 text-center mb-3">
			<h2 class="fs-3" style="font-weight: 500;">You don't have flashcards collections yet</h2>
		</div>
		{% endfor %}

	</div>

</div>
<!-- Modals -->
<!-- Add new collection -->
<div class="modal fade" id="add_new_collection" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
	<div class="modal-dialog modal-dialog-centered modal-dialog-scrollable">
		<div class="modal-content">
			<div class="modal-header">
				<h5 class="modal-title c-primary col-11 text-center fw-bold">Add a new flashcards collection</h5>
				<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="close"></button>
			</div>
			<div class="modal-body">
				<form action="{% url 'add_flashcards_collection' %}" autocomplete="off" method="post" id="nc_form"
					class="form-label-bold">
					{% csrf_token %}
					<div class="mb-2">
						<label for="nc_name" class="form-label c-primary">Name</label>
						<input type="text" class="form-control" name="collection_name" id="nc_name" placeholder="Collection name"
							required>
					</div>
					<div class="mb-2">
						<label for="nc_description" class="form-label c-primary">Description</label>
						<input type="text" class="form-control" name="description" id="nc_description" placeholder="Description">
					</div>
				</form>
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
				<button type="sumbit" class="btn btn-primary" form="nc_form">Add</button>
			</div>
		</div>
	</div>
</div>
<!-- fin del modal para agregar estudiantes por excel -->

<br><br>
{% endblock %}

{% block page-scripts %}
<script>
	//const db_stories = JSON.parse('{{ stories_json|escapejs }}');

	//let search_input = document.getElementById("search_input");
	//search_input.addEventListener('keyup', (e) => { filterData(e.target.value) });
	/*
	function filterData(string) {
		string = string.toLowerCase();
		const filtered_items = db_stories
			.filter(item =>
				item.fields.title1.toLowerCase().includes(string) || item.fields.title2.toLowerCase().includes(string) ||
				item.fields.description1.toLowerCase().includes(string) || item.fields.description2.toLowerCase().includes(string)
			);
		let hide_items = document.getElementsByName("story_slot");
		for (let i of hide_items) {
			i.classList.add("hide");
			i.classList.remove("show");
		}

		for (let i of filtered_items) {
			let x = document.getElementById("story_" + i.pk);
			x.classList.add("show");
			x.classList.remove("hide");
		}
	}
	*/
</script>
{% endblock %}