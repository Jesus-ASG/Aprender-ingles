{% load static %}
{% load filters %}

<nav class="top-navbar">
	<ul class="top-navbar-nav">
		<li class="top-nav-item nav-menu" id="navbar_toggle_button">
			<span class="top-nav-icon"><i class="fa-solid fa-bars"></i></span>
		</li>
		<!-- LOGO -->
		<li class="top-nav-logo">
			<a class="index_link" href="{% url 'index' %}">
				<img src="{% static 'img/sq_logos/sq_full_white.png' %}" alt="sq_logo.png">
			</a>
		</li>
		<!-- END OF LOGO-->

		<!-- LINKS -->
		{% if request.user.is_authenticated %}
		<!-- RIGHT -->
		<li class="top-nav-item" style="margin-right: auto;"></li>
		<li class="">
			<ul class="right-buttons">
				{% if request.user.is_authenticated %}
				<li class="top-nav-item top-nav-link active hide-on-500" style="cursor: default;">
					{{ request.user.username|title }}
				</li>

				<!-- Profile -->
				<li class="top-nav-item dropdown" style="margin-left:auto; margin-right:1rem">
					<a class="top-nav-link dropdown-toggle" href="#" id="profile_dropdown" role="button" data-bs-toggle="dropdown"
						aria-haspopup="true" aria-expanded="false">
						<div class="navbar-circle-progress">
							<div class="navbar-progress-level">
								<div class="navbar-profile-picture">
									{% if request.user.profile.default_profile_image %}
									<img src="{{ request.user.profile.default_profile_image }}" alt="Not found">
									{% else %}
									<img src="{% static 'img/profile_pictures/pp3.jpg' %}" alt="Not found">
									{% endif %}
								</div>
							</div>
							<div class="navbar-level">
								<h3>{{ request.user.profile.level|to_int }}</h3>
							</div>
						</div>
					</a>
					<!-- Profile dropdown -->
					<ul class="dropdown-menu dropdown-menu-dark navbar-bg-color dropdown-menu-lg-end"
						aria-labelledby="profile_dropdown">
						<li>
							<a class="dropdown-item" href="{% url 'profile' %}">
								<div class="navbar-circle-progress">
									<div class="navbar-progress-level">
										<div class="navbar-profile-picture">
											{% if request.user.profile.default_profile_image %}
											<img src="{{ request.user.profile.default_profile_image }}" alt="Not found">
											{% else %}
											<img src="{% static 'img/profile_pictures/pp3.jpg' %}" alt="Not found">
											{% endif %}
										</div>
									</div>
									<div class="navbar-level">
										<h3>{{ request.user.profile.level|to_int }}</h3>
									</div>
								</div>
								<p class="d-inline-block text-center w-100 mt-1">{{ request.user.username|title }}</p>
							</a>
						</li>

						<li>
							<hr class="dropdown-divider">
						</li>
						<li>
							<a class="dropdown-item" href="{% url 'stories' %}?collection=liked&p=1">
								<span class="me-1"><i class="fas fa-heart fa-lg"></i></span>
								<p class="d-inline-block">Favorites</p>
							</a>
						</li>
						<li>
							<a class="dropdown-item" href="{% url 'stories' %}?collection=saved&p=1">
								<span class="me-1"><i class="fas fa-bookmark fa-lg"></i></span>
								<p class="d-inline-block">Saved</p>
							</a>
						</li>
						<li>
							<hr class="dropdown-divider">
						</li>
						<li>
							<a class="dropdown-item" href="{% url 'logout' %}">
								<span class="me-1"><i class="fa fa-sign-out fa-lg" aria-hidden="true"></i></span>
								<p class="d-inline-block">Logout</p>
							</a>
						</li>

					</ul>
				</li>
				<!-- End of dropdown profile options -->

				{% endif %}

			</ul>
		</li>
		{% else %}
		<ul class="right-buttons">
			<li class="top-nav-item">
				<a href="{% url 'login' %}" class="btn hover-scale fw-bold hover-orange" style="border-radius: 20px;
					background-color: #fafa14;">Iniciar sesi√≥n</a>
			</li>

			<li class="top-nav-item">
				<a href="{% url 'register' %}" class="btn hover-scale fw-bold hover-orange" style="border-radius: 20px;
				background-color: #fdfda4;">Registrarse</a>
			</li>

		</ul>
		{% endif %}

	</ul>
</nav>